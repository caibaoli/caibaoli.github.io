---
title: 2020-07-08-Spring AOP 应用
author: baocai
categories: [spring]
tags: spring
---


# Spring AOP 应用


### 第1节 AOP 术语

Joinpoint(连接点)
***要被增强的方法。***
它指的是那些可以用于把增强代码加入到业务主线中的点，那么由上图中我们可以看出，这些点指的就是方法。在方法执行的前后通过动态代理技术加入增强的代码。在Spring框架AOP思想的技术实现中，也只支持方法类型的连接点。

Pointcut(切入点)
***已经被增强的方法。***
它指的是那些已经把增强代码加入到业务主线进来之后的连接点。由上图中，我们看出表现层 transfer 方法就只是连接点，因为判断访问权限的功能并没有对 其增强。
 
Advice(通知/增强)
***附加额外功能。***
它指的是切面类中用于提供增强功能的方法。并且不同的方法增强的时机是不一样的。比如，开启事务肯定要在业务方法执行之前执行;提交事务要在业务方法正常执行之后执行，而回滚事务要在业务方法执行产生异常之后执行等等。那么 这些就是通知的类型。其分类有:前置通知 后置通知 异常通知 最终通知环绕通知。

Target(目标对象)
***实际对象。***
它指的是代理的目标对象。即被代理对象。

Proxy(代理)
***写横切逻辑的对象。***
它指的是一个类被AOP织入增强后，产生的代理类。即代理对象。

Weaving(织入)
***增强实现的过程。***
它指的是把增强应用到目标对象来创建新的代理对象的过程。spring采用动态代理织入，而AspectJ采用编译期织入和类装载期织入。

Aspect(切面)
***在哪个方法哪个地方插入什么横切逻辑代码***
它指定是增强的代码所关注的方面，把这些相关的增强代码定义到一个类中，这个类就是切面类。例如，事务切面，它里面定义的方法就是和事务相关的，像开启事务，提交事务，回滚事务等等，不会定义其他与事务无关的方法。我们前面的案例中 TrasnactionManager 就是一个切面。
 
 ### 第2节 Spring中AOP的代理选择
 
Spring 实现AOP思想使用的是动态代理技术
默认情况下，Spring会根据被代理对象是否实现接口来选择使用JDK还是CGLIB。当被代理对象没有实现任何接口时，Spring会选择CGLIB。当被代理对象实现了接口，Spring会选择JDK官方的代理技术，不过 我们可以通过配置的方式，让Spring强制使用CGLIB。

 ### 第3节 Spring中AOP的配置方式

在Spring的AOP配置中，也和IoC配置一样，支持3类配置方式。 
第一类:使用XML配置
第二类:使用XML+注解组合配置
第三类:使用纯注解配置